<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Chat - SMM AI</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'inter': ['Inter', 'sans-serif'],
                    },
                    colors: {
                        primary: '#2563EB',
                        secondary: '#10B981',
                    }
                }
            }
        }
    </script>
</head>
<body class="font-inter bg-gray-50 h-screen flex flex-col">
    <!-- Header with Wallet Balance -->
    <header class="bg-white border-b border-gray-200 p-4">
        <div class="max-w-4xl mx-auto flex justify-between items-center">
            <div class="flex items-center space-x-4">
                <a href="/" class="text-2xl font-bold text-primary">SMM AI</a>
                <span class="text-gray-400">|</span>
                <span class="text-gray-600">Chat Assistant</span>
            </div>
            
            <!-- Wallet Balance -->
            <div class="flex items-center space-x-4">
                <div class="bg-gray-50 px-4 py-2 rounded-lg border border-gray-200">
                    <span class="text-sm text-gray-600">Wallet Balance:</span>
                    <span class="font-semibold text-primary ml-2" id="walletBalance">$0.00</span>
                </div>
                <button onclick="showDepositModal()" class="bg-secondary text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors font-medium">
                    Deposit Funds
                </button>
            </div>
        </div>
    </header>

    <!-- Chat Container -->
    <div class="flex-1 flex flex-col max-w-4xl mx-auto w-full">
        <!-- Messages Container -->
        <div class="flex-1 overflow-y-auto p-4 space-y-4" id="messagesContainer">
            <!-- Welcome Message -->
            <div class="flex items-start space-x-3">
                <div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center flex-shrink-0">
                    <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"></path>
                    </svg>
                </div>
                <div class="bg-white p-4 rounded-2xl rounded-bl-md shadow-sm border border-gray-200 max-w-md">
                    <p class="text-gray-800">ðŸ‘‹ Hi! I'm your SMM AI assistant. I'll help you grow your social media with custom strategies.</p>
                    <p class="text-gray-600 text-sm mt-2">Tell me about your goals to get started!</p>
                </div>
            </div>

            <!-- Example Prompt -->
            <div class="flex justify-center">
                <div class="bg-blue-50 border border-blue-200 rounded-xl p-4 max-w-md text-center">
                    <p class="text-blue-800 font-medium mb-3">ðŸ’¡ Try this example:</p>
                    <button onclick="setExamplePrompt()" class="bg-white text-blue-700 px-4 py-2 rounded-lg border border-blue-300 hover:bg-blue-50 transition-colors text-sm">
                        "I have a fitness Instagram with 5K followers and $75 budget. Want to reach 20K followers."
                    </button>
                </div>
            </div>
        </div>

        <!-- Input Area -->
        <div class="p-4 bg-white border-t border-gray-200">
            <div class="flex space-x-3">
                <input 
                    type="text" 
                    id="messageInput" 
                    placeholder="Describe your social media goals, current followers, budget..."
                    class="flex-1 px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:outline-none transition-colors"
                    onkeypress="handleKeyPress(event)"
                >
                <button 
                    onclick="sendMessage()" 
                    id="sendButton"
                    class="bg-primary text-white px-6 py-3 rounded-xl hover:bg-blue-700 transition-colors font-medium">
                    Send
                </button>
            </div>
        </div>
    </div>

    <!-- Deposit Modal -->
    <div id="depositModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl p-6 w-full max-w-md mx-4">
            <h3 class="text-xl font-bold text-gray-900 mb-4">Add Funds to Wallet</h3>
            <div class="space-y-4">
                <div class="grid grid-cols-3 gap-2">
                    <button onclick="setDepositAmount(25)" class="bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-lg font-medium">$25</button>
                    <button onclick="setDepositAmount(50)" class="bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-lg font-medium">$50</button>
                    <button onclick="setDepositAmount(100)" class="bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-lg font-medium">$100</button>
                </div>
                <input type="number" id="depositAmount" placeholder="Custom amount" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-primary focus:outline-none">
                <button onclick="processDeposit()" class="w-full bg-secondary text-white py-3 rounded-lg font-medium hover:bg-green-600 transition-colors">
                    Add Funds
                </button>
                <button onclick="hideDepositModal()" class="w-full bg-gray-100 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-200 transition-colors">
                    Cancel
                </button>
            </div>
        </div>
    </div>

    <script>
        let walletBalance = 0;
        let chatHistory = [];
        let isProcessing = false;

        // Load wallet balance from localStorage
        function loadWalletBalance() {
            const saved = localStorage.getItem('walletBalance');
            if (saved) {
                walletBalance = parseFloat(saved);
                updateWalletDisplay();
            }
        }

        // Update wallet display
        function updateWalletDisplay() {
            document.getElementById('walletBalance').textContent = `$${walletBalance.toFixed(2)}`;
        }

        // Save wallet balance to localStorage
        function saveWalletBalance() {
            localStorage.setItem('walletBalance', walletBalance.toString());
        }

        // Deposit Modal Functions
        function showDepositModal() {
            document.getElementById('depositModal').classList.remove('hidden');
        }

        function hideDepositModal() {
            document.getElementById('depositModal').classList.add('hidden');
            document.getElementById('depositAmount').value = '';
        }

        function setDepositAmount(amount) {
            document.getElementById('depositAmount').value = amount;
        }

        function processDeposit() {
            const amount = parseFloat(document.getElementById('depositAmount').value);
            if (amount && amount > 0) {
                walletBalance += amount;
                updateWalletDisplay();
                saveWalletBalance();
                hideDepositModal();
                addMessage('ai', `âœ… Successfully added $${amount} to your wallet! Your new balance is $${walletBalance.toFixed(2)}.`);
            }
        }

        // Set example prompt
        function setExamplePrompt() {
            document.getElementById('messageInput').value = "I have a fitness Instagram with 5K followers and $75 budget. Want to reach 20K followers.";
            document.getElementById('messageInput').focus();
        }

        // Handle enter key press
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // Add message to chat
        function addMessage(sender, content, isPlans = false) {
            const messagesContainer = document.getElementById('messagesContainer');
            const messageDiv = document.createElement('div');

            if (sender === 'user') {
                messageDiv.innerHTML = `
                    <div class="flex justify-end">
                        <div class="bg-primary text-white p-4 rounded-2xl rounded-br-md max-w-md shadow-sm">
                            <p>${content}</p>
                        </div>
                    </div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="flex items-start space-x-3">
                        <div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center flex-shrink-0">
                            <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"></path>
                            </svg>
                        </div>
                        <div class="bg-white p-4 rounded-2xl rounded-bl-md shadow-sm border border-gray-200 max-w-md">
                            ${content}
                        </div>
                    </div>
                `;
            }

            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // Show typing indicator
        function showTypingIndicator() {
            const messagesContainer = document.getElementById('messagesContainer');
            const typingDiv = document.createElement('div');
            typingDiv.id = 'typingIndicator';
            typingDiv.innerHTML = `
                <div class="flex items-start space-x-3">
                    <div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center flex-shrink-0">
                        <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"></path>
                        </svg>
                    </div>
                    <div class="bg-white p-4 rounded-2xl rounded-bl-md shadow-sm border border-gray-200">
                        <div class="flex space-x-1">
                            <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce"></div>
                            <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 0.1s"></div>
                            <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
                        </div>
                    </div>
                </div>
            `;
            messagesContainer.appendChild(typingDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // Remove typing indicator
        function removeTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        // Generate AI response plans
        function generatePlans(userMessage) {
            const platforms = ['Instagram', 'TikTok', 'YouTube', 'Facebook', 'Twitter'];
            const budgetMatch = userMessage.match(/\$?(\d+)/);
            const budget = budgetMatch ? parseInt(budgetMatch[1]) : 50;
            
            const plans = [
                {
                    name: "Growth Starter",
                    price: Math.max(25, Math.floor(budget * 0.6)),
                    description: "Perfect for beginners looking to build a solid foundation",
                    features: [
                        `${Math.floor(budget * 20)} targeted followers`,
                        "Post engagement boost",
                        "24-48h delivery",
                        "Email support"
                    ],
                    color: "border-blue-200 hover:border-blue-400"
                },
                {
                    name: "Viral Boost",
                    price: Math.max(40, Math.floor(budget * 0.8)),
                    description: "Best value for rapid growth and viral potential",
                    features: [
                        `${Math.floor(budget * 35)} quality followers`,
                        "Viral content promotion",
                        "Story/Reel boost",
                        "Priority support"
                    ],
                    color: "border-green-200 hover:border-green-400",
                    popular: true
                },
                {
                    name: "Pro Growth",
                    price: Math.max(75, Math.floor(budget * 1.2)),
                    description: "Complete optimization for serious creators",
                    features: [
                        `${Math.floor(budget * 50)} premium followers`,
                        "Multi-platform growth",
                        "Custom hashtag research",
                        "Dedicated manager"
                    ],
                    color: "border-purple-200 hover:border-purple-400"
                }
            ];

            let plansHTML = `
                <p class="text-gray-800 mb-4">Great! I've analyzed your goals and created 3 custom strategies:</p>
                <div class="space-y-3">
            `;

            plans.forEach((plan, index) => {
                plansHTML += `
                    <div class="border-2 ${plan.color} rounded-xl p-4 transition-all ${plan.popular ? 'bg-green-50' : 'bg-gray-50'}">
                        <div class="flex justify-between items-start mb-2">
                            <h4 class="font-semibold text-gray-900">${plan.name}</h4>
                            ${plan.popular ? '<span class="bg-green-500 text-white text-xs px-2 py-1 rounded-full">Most Popular</span>' : ''}
                        </div>
                        <p class="text-sm text-gray-600 mb-3">${plan.description}</p>
                        <ul class="text-sm text-gray-700 mb-3">
                            ${plan.features.map(feature => `<li class="flex items-center"><span class="text-green-500 mr-2">âœ“</span>${feature}</li>`).join('')}
                        </ul>
                        <div class="flex justify-between items-center">
                            <span class="text-lg font-bold text-gray-900">$${plan.price}</span>
                            <button onclick="choosePlan('${plan.name}', ${plan.price})" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium">
                                Choose Plan
                            </button>
                        </div>
                    </div>
                `;
            });

            plansHTML += `
                </div>
                <p class="text-sm text-gray-600 mt-4">ðŸ’¡ All plans include real followers from our premium SMM panel and come with a satisfaction guarantee.</p>
            `;

            return plansHTML;
        }

        // Choose a plan
        function choosePlan(planName, price) {
            if (walletBalance < price) {
                addMessage('ai', `âŒ Insufficient funds! You need $${price} but your wallet balance is $${walletBalance.toFixed(2)}. Please deposit funds to continue.`);
                return;
            }

            addMessage('user', `I want to choose the ${planName} plan for $${price}`);
            
            setTimeout(() => {
                showTypingIndicator();
                setTimeout(() => {
                    removeTypingIndicator();
                    addMessage('ai', `Perfect choice! I need a few details to execute your ${planName} plan:`);
                    
                    setTimeout(() => {
                        addMessage('ai', `
                            <div class="space-y-3">
                                <div class="bg-blue-50 p-3 rounded-lg">
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Your Username/Handle:</label>
                                    <input type="text" id="usernameInput" placeholder="@your_username" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm">
                                </div>
                                <div class="bg-blue-50 p-3 rounded-lg">
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Post/Profile Link (optional):</label>
                                    <input type="text" id="profileLinkInput" placeholder="https://instagram.com/your_profile" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm">
                                </div>
                                <button onclick="confirmOrder('${planName}', ${price})" class="w-full bg-green-500 text-white py-2 rounded-lg font-medium hover:bg-green-600 transition-colors">
                                    Confirm Order - $${price}
                                </button>
                            </div>
                        `);
                    }, 1000);
                }, 1500);
            }, 500);
        }

        // Confirm order
        function confirmOrder(planName, price) {
            const username = document.getElementById('usernameInput').value;
            const profileLink = document.getElementById('profileLinkInput').value;

            if (!username.trim()) {
                alert('Please enter your username/handle');
                return;
            }

            // Deduct from wallet
            walletBalance -= price;
            updateWalletDisplay();
            saveWalletBalance();

            addMessage('user', `Username: ${username}${profileLink ? '\nProfile: ' + profileLink : ''}`);
            
            setTimeout(() => {
                showTypingIndicator();
                setTimeout(() => {
                    removeTypingIndicator();
                    addMessage('ai', `ðŸŽ‰ Order confirmed! Your ${planName} plan is now processing.`);
                    
                    setTimeout(() => {
                        addMessage('ai', `
                            <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                                <h4 class="font-semibold text-green-800 mb-2">âœ… Order Details:</h4>
                                <ul class="text-sm text-green-700 space-y-1">
                                    <li><strong>Plan:</strong> ${planName}</li>
                                    <li><strong>Cost:</strong> $${price}</li>
                                    <li><strong>Username:</strong> ${username}</li>
                                    <li><strong>Status:</strong> Processing</li>
                                    <li><strong>Estimated completion:</strong> 24-48 hours</li>
                                </ul>
                                <p class="text-sm text-green-600 mt-3">ðŸ’¡ You'll receive updates as your order progresses. Check back soon!</p>
                            </div>
                        `);
                        
                        setTimeout(() => {
                            addMessage('ai', `Is there anything else I can help you with? I can create more growth plans or answer any questions!`);
                        }, 2000);
                    }, 1500);
                }, 2000);
            }, 500);
        }

        // Send message
        function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();
            
            if (!message || isProcessing) return;
            
            isProcessing = true;
            input.value = '';
            
            // Add user message
            addMessage('user', message);
            
            // Show typing indicator
            setTimeout(() => {
                showTypingIndicator();
                
                // Generate AI response after delay
                setTimeout(() => {
                    removeTypingIndicator();
                    const plans = generatePlans(message);
                    addMessage('ai', plans);
                    isProcessing = false;
                }, 2000);
            }, 500);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadWalletBalance();
        });
    </script>
</body>
</html> 